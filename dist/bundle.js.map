{"version":3,"file":"bundle.js","sources":["../src/ratelimit.ts","../src/types.ts","../src/get.ts","../src/update.ts","../src/append.ts","../src/delete.ts","../src/index.ts"],"sourcesContent":["export function callHandler<T>(fn: () => T, retries: number = 10): T {\r\n  let attempt = 0;\r\n\r\n  while (attempt < retries) {\r\n    try {\r\n      return fn();\r\n    } catch (error) {\r\n      if (\r\n        error.message.includes(\"429\") ||\r\n        error.message.includes(\"Quota exceeded for quota metric\")\r\n      ) {\r\n        attempt++;\r\n        const backoffDelay = Math.min(\r\n          Math.pow(2, attempt) + Math.random() * 1000,\r\n          32000\r\n        );\r\n        Utilities.sleep(backoffDelay);\r\n      } else {\r\n        throw error; // Rethrow if it's not a rate limit error\r\n      }\r\n    }\r\n  }\r\n\r\n  throw new Error(\"Max retries reached for Google Sheets API call.\");\r\n}\r\n","export type GQueryReadOptions = {\r\n  valueRenderOption?: ValueRenderOption;\r\n  dateTimeRenderOption?: DateTimeRenderOption;\r\n};\r\nexport type GQueryResult = {\r\n  rows: GQueryRow[];\r\n  headers: string[];\r\n};\r\nexport type GQueryRow = Record<string, any> & {\r\n  __meta: {\r\n    rowNum: number;\r\n    colLength: number;\r\n  };\r\n};\r\nexport enum ValueRenderOption {\r\n  FORMATTED_VALUE = \"FORMATTED_VALUE\",\r\n  UNFORMATTED_VALUE = \"UNFORMATTED_VALUE\",\r\n  FORMULA = \"FORMULA\",\r\n}\r\nexport enum DateTimeRenderOption {\r\n  FORMATTED_STRING = \"FORMATTED_STRING\",\r\n  SERIAL_NUMBER = \"SERIAL_NUMBER\",\r\n}\r\n","import { GQuery, GQueryTable, GQueryTableFactory } from \"./index\";\r\nimport { callHandler } from \"./ratelimit\";\r\nimport {\r\n  GQueryReadOptions,\r\n  GQueryResult,\r\n  ValueRenderOption,\r\n  DateTimeRenderOption,\r\n  GQueryRow,\r\n} from \"./types\";\r\n\r\nexport function getManyInternal(\r\n  gquery: GQuery,\r\n  sheetNames: string[],\r\n  options?: GQueryReadOptions\r\n): {\r\n  [sheetName: string]: GQueryResult;\r\n} {\r\n  if (!sheetNames || sheetNames.length === 0) {\r\n    return {};\r\n  }\r\n\r\n  // Set default options if not provided\r\n  const valueRenderOption =\r\n    options?.valueRenderOption || ValueRenderOption.FORMATTED_VALUE;\r\n  const dateTimeRenderOption =\r\n    options?.dateTimeRenderOption || DateTimeRenderOption.FORMATTED_STRING;\r\n\r\n  const result: { [sheetName: string]: GQueryResult } = {};\r\n  const headersMap: { [sheetName: string]: string[] } = {};\r\n\r\n  // Step 1: Get headers for each sheet (row 1)\r\n  for (const sheetName of sheetNames) {\r\n    try {\r\n      const headerResponse = callHandler(() =>\r\n        Sheets.Spreadsheets.Values.get(\r\n          gquery.spreadsheetId,\r\n          `${sheetName}!1:1`,\r\n          {\r\n            valueRenderOption: valueRenderOption,\r\n            dateTimeRenderOption: dateTimeRenderOption,\r\n          }\r\n        )\r\n      );\r\n\r\n      if (\r\n        !headerResponse ||\r\n        !headerResponse.values ||\r\n        headerResponse.values.length === 0\r\n      ) {\r\n        // Handle empty sheet or sheet with no headers\r\n        result[sheetName] = { headers: [], rows: [] };\r\n        continue;\r\n      }\r\n\r\n      headersMap[sheetName] = headerResponse.values[0].map((header) =>\r\n        String(header)\r\n      );\r\n    } catch (e) {\r\n      console.error(`Error fetching headers for sheet ${sheetName}:`, e);\r\n      result[sheetName] = { headers: [], rows: [] };\r\n    }\r\n  }\r\n\r\n  // Step 2: Get data for sheets that have headers\r\n  const sheetsToFetch = Object.keys(headersMap).filter(\r\n    (sheet) => headersMap[sheet].length > 0\r\n  );\r\n\r\n  if (sheetsToFetch.length === 0) {\r\n    return result;\r\n  }\r\n\r\n  // Also fetch metadata for each sheet to determine data types\r\n  let sheetMetadata: { [sheetName: string]: { [header: string]: string } } = {};\r\n\r\n  try {\r\n    // Get spreadsheet metadata including sheet tables if available\r\n    const metadataResponse = callHandler(() =>\r\n      Sheets.Spreadsheets.get(gquery.spreadsheetId, {\r\n        fields: \"sheets(properties(title),tables.columnProperties)\",\r\n      })\r\n    );\r\n\r\n    if (metadataResponse && metadataResponse.sheets) {\r\n      metadataResponse.sheets.forEach((sheet) => {\r\n        const sheetName = sheet.properties?.title;\r\n        if (!sheetName || !sheetsToFetch.includes(sheetName)) return;\r\n\r\n        // @ts-expect-error: TypeScript may not recognize the tables property\r\n        if (sheet.tables && sheet.tables.length > 0) {\r\n          // Use the first table definition for column properties\r\n          // @ts-expect-error: TypeScript may not recognize the tables property\r\n          const table = sheet.tables[0];\r\n          if (table.columnProperties) {\r\n            sheetMetadata[sheetName] = {};\r\n\r\n            // For each column property, store its data type\r\n            Object.keys(table.columnProperties).forEach((column) => {\r\n              const dataType = table.columnProperties[column].dataType;\r\n              if (dataType) {\r\n                sheetMetadata[sheetName][column] = dataType;\r\n              }\r\n            });\r\n          }\r\n        }\r\n      });\r\n    }\r\n  } catch (e) {\r\n    console.error(\"Error fetching metadata:\", e);\r\n    // Continue without metadata - types won't be converted\r\n  }\r\n\r\n  // Batch get data for all sheets (just use the sheet name as the range)\r\n  const dataRanges = sheetsToFetch.map((sheet) => `${sheet}`);\r\n  const dataResponse = callHandler(() =>\r\n    Sheets.Spreadsheets.Values.batchGet(gquery.spreadsheetId, {\r\n      ranges: dataRanges,\r\n      valueRenderOption: valueRenderOption,\r\n      dateTimeRenderOption: dateTimeRenderOption,\r\n    })\r\n  );\r\n\r\n  if (!dataResponse || !dataResponse.valueRanges) {\r\n    // Return just the headers if we couldn't get any data\r\n    sheetsToFetch.forEach((sheet) => {\r\n      result[sheet] = {\r\n        headers: headersMap[sheet],\r\n        rows: [],\r\n      };\r\n    });\r\n    return result;\r\n  }\r\n\r\n  // Process each value range from the batch response\r\n  dataResponse.valueRanges.forEach((valueRange, index) => {\r\n    const sheetName = sheetsToFetch[index];\r\n    const headers = headersMap[sheetName];\r\n\r\n    if (!valueRange.values || valueRange.values.length === 0) {\r\n      // Sheet exists but has no data rows\r\n      result[sheetName] = { headers, rows: [] };\r\n      return;\r\n    }\r\n\r\n    const rows: GQueryRow[] = [];\r\n    const columnTypes = sheetMetadata[sheetName] || {};\r\n\r\n    // Process data rows\r\n    valueRange.values.forEach((rowData, rowIndex) => {\r\n      const row: GQueryRow = {\r\n        __meta: {\r\n          rowNum: rowIndex + 2, // +2 because we're starting from index 0 and row 1 is headers\r\n          colLength: rowData.length,\r\n        },\r\n      };\r\n\r\n      // First initialize all header fields to empty strings\r\n      headers.forEach((header) => {\r\n        row[header] = \"\";\r\n      });\r\n\r\n      // Map each column value to its corresponding header\r\n      for (let j = 0; j < Math.min(rowData.length, headers.length); j++) {\r\n        const header = headers[j];\r\n        let value = rowData[j];\r\n\r\n        if (value === null || value === undefined) {\r\n          continue; // Skip processing but keep the empty string initialized earlier\r\n        }\r\n\r\n        // Apply type conversions based on metadata if available\r\n        if (columnTypes[header] && value !== \"\") {\r\n          const dataType = columnTypes[header];\r\n\r\n          if (dataType === \"BOOLEAN\") {\r\n            // Convert to boolean\r\n            if (typeof value === \"string\") {\r\n              value = value.toLowerCase() === \"true\";\r\n            }\r\n          } else if (dataType === \"DATE_TIME\") {\r\n            // Convert to Date object\r\n            try {\r\n              const dateValue = new Date(value);\r\n              if (!isNaN(dateValue.getTime())) {\r\n                value = dateValue;\r\n              }\r\n            } catch (e) {\r\n              // Keep original value if conversion fails\r\n            }\r\n          } else if (dataType === \"NUMBER\") {\r\n            // Convert to number\r\n            const numValue = Number(value);\r\n            if (!isNaN(numValue)) {\r\n              value = numValue;\r\n            }\r\n          }\r\n        } else {\r\n          // Try automatic type inference for common patterns\r\n          if (typeof value === \"string\") {\r\n            // Auto-detect booleans\r\n            if (\r\n              value.toLowerCase() === \"true\" ||\r\n              value.toLowerCase() === \"false\"\r\n            ) {\r\n              value = value.toLowerCase() === \"true\";\r\n            }\r\n            // Auto-detect dates (simple pattern for dates like MM/DD/YYYY, etc.)\r\n            else if (\r\n              /^\\d{1,2}\\/\\d{1,2}\\/\\d{4}(\\s\\d{1,2}:\\d{1,2}(:\\d{1,2})?)?$/.test(\r\n                value\r\n              )\r\n            ) {\r\n              try {\r\n                const dateValue = new Date(value);\r\n                if (!isNaN(dateValue.getTime())) {\r\n                  value = dateValue;\r\n                }\r\n              } catch (e) {\r\n                // Keep as string if conversion fails\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        row[header] = value;\r\n      }\r\n\r\n      rows.push(row);\r\n    });\r\n\r\n    result[sheetName] = { headers, rows };\r\n  });\r\n\r\n  // Make sure all sheets in headersMap have an entry in result\r\n  sheetsToFetch.forEach((sheet) => {\r\n    if (!result[sheet]) {\r\n      result[sheet] = {\r\n        headers: headersMap[sheet],\r\n        rows: [],\r\n      };\r\n    }\r\n  });\r\n\r\n  // Convert data types based on metadata if available\r\n  if (Object.keys(sheetMetadata).length > 0) {\r\n    Object.keys(result).forEach((sheetName) => {\r\n      const sheetResult = result[sheetName];\r\n      const metadata = sheetMetadata[sheetName];\r\n\r\n      if (sheetResult && sheetResult.rows && metadata) {\r\n        sheetResult.rows = sheetResult.rows.map((row) => {\r\n          const newRow = { ...row };\r\n\r\n          Object.keys(metadata).forEach((column) => {\r\n            const dataType = metadata[column];\r\n\r\n            // Convert based on data type\r\n            if (dataType === \"NUMBER\") {\r\n              newRow[column] = Number(row[column]);\r\n            } else if (dataType === \"BOOLEAN\") {\r\n              newRow[column] = row[column] === \"TRUE\";\r\n            } else if (dataType === \"DATE\" || dataType === \"DATETIME\") {\r\n              newRow[column] = new Date(row[column]);\r\n            }\r\n            // Add more conversions as needed\r\n          });\r\n\r\n          return newRow;\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nexport function getInternal(\r\n  gqueryTableFactory: GQueryTableFactory,\r\n  options?: GQueryReadOptions\r\n): GQueryResult {\r\n  const gqueryTable = gqueryTableFactory.gQueryTable;\r\n  const gquery = gqueryTable.gquery;\r\n  // Determine which sheets we need to read from\r\n  const sheetsToRead = [gqueryTable.sheetName];\r\n\r\n  // Add all join sheets\r\n  if (gqueryTableFactory.joinOption.length > 0) {\r\n    gqueryTableFactory.joinOption.forEach((join) => {\r\n      if (!sheetsToRead.includes(join.sheetName)) {\r\n        sheetsToRead.push(join.sheetName);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Read data from all required sheets at once\r\n  const results = gquery.getMany(sheetsToRead, options);\r\n\r\n  // If the main sheet doesn't exist or has no data\r\n  if (\r\n    !results[gqueryTable.sheetName] ||\r\n    results[gqueryTable.sheetName].rows.length === 0\r\n  ) {\r\n    return { headers: [], rows: [] };\r\n  }\r\n\r\n  // Get data for the primary table\r\n  let result = results[gqueryTable.sheetName];\r\n  let rows = result.rows;\r\n  let headers = result.headers;\r\n\r\n  // Process each join sequentially\r\n  if (gqueryTableFactory.joinOption.length > 0) {\r\n    gqueryTableFactory.joinOption.forEach((joinConfig) => {\r\n      const { sheetName, sheetColumn, joinColumn, columnsToReturn } =\r\n        joinConfig;\r\n\r\n      const joinData = results[sheetName];\r\n\r\n      if (!joinData || !joinData.rows || joinData.rows.length === 0) {\r\n        return; // Skip this join\r\n      }\r\n\r\n      // Create join lookup table\r\n      const joinMap: Record<string, any[]> = {};\r\n\r\n      // Check if the join column exists in the join table\r\n      const joinHeaders = joinData.headers;\r\n      if (!joinHeaders.includes(sheetColumn)) {\r\n        return; // Skip this join\r\n      }\r\n\r\n      joinData.rows.forEach((joinRow) => {\r\n        const joinKey = String(joinRow[sheetColumn]);\r\n        if (!joinMap[joinKey]) {\r\n          joinMap[joinKey] = [];\r\n        }\r\n        joinMap[joinKey].push(joinRow);\r\n      });\r\n\r\n      // Perform the join operation\r\n      rows = rows.map((row) => {\r\n        const localJoinValue = row[joinColumn];\r\n        const joinedRows = joinMap[String(localJoinValue)] || [];\r\n\r\n        // Create joined row with all join table fields\r\n        const joinedRow = { ...row };\r\n\r\n        joinedRows.forEach((joinRow, index) => {\r\n          // Determine which columns to include from join\r\n          const columnsToInclude =\r\n            columnsToReturn ||\r\n            Object.keys(joinRow).filter(\r\n              (key) => key !== \"__meta\" && key !== sheetColumn\r\n            );\r\n\r\n          columnsToInclude.forEach((key) => {\r\n            if (joinRow.hasOwnProperty(key) && key !== \"__meta\") {\r\n              // For multiple joined rows, add suffix _1, _2, etc.\r\n              const suffix = joinedRows.length > 1 ? `_${index + 1}` : \"\";\r\n              const targetKey = key === sheetColumn ? key : `${key}${suffix}`;\r\n              joinedRow[targetKey] = joinRow[key];\r\n            }\r\n          });\r\n        });\r\n\r\n        return joinedRow;\r\n      });\r\n    });\r\n  }\r\n\r\n  // Apply filter if specified\r\n  if (gqueryTableFactory.filterOption) {\r\n    rows = rows.filter(gqueryTableFactory.filterOption);\r\n  }\r\n\r\n  // Apply select if specified\r\n  if (\r\n    gqueryTableFactory.selectOption &&\r\n    gqueryTableFactory.selectOption.length > 0\r\n  ) {\r\n    // Create a map to track columns from joined tables\r\n    const joinedColumns = new Set<string>();\r\n\r\n    // Collect all columns from joined tables\r\n    rows.forEach((row) => {\r\n      Object.keys(row).forEach((key) => {\r\n        // If the column is not in the original headers, it's from a join\r\n        if (!headers.includes(key) && key !== \"__meta\") {\r\n          joinedColumns.add(key);\r\n        }\r\n      });\r\n    });\r\n\r\n    // If we have a select option, determine which columns to keep\r\n    let selectedHeaders: string[];\r\n\r\n    // Check if any of the selected headers is \"Model\" or \"Model_Name\"\r\n    // If we're selecting the join columns, we want to include all related joined fields\r\n    if (\r\n      gqueryTableFactory.selectOption.some(\r\n        (header) =>\r\n          header === \"Model\" ||\r\n          header === \"Model_Name\" ||\r\n          gqueryTableFactory.joinOption.some(\r\n            (j) => j.joinColumn === header || j.sheetColumn === header\r\n          )\r\n      )\r\n    ) {\r\n      // Include all join-related columns and the selected columns\r\n      selectedHeaders = [...gqueryTableFactory.selectOption];\r\n      joinedColumns.forEach((joinCol) => {\r\n        selectedHeaders.push(joinCol);\r\n      });\r\n    } else {\r\n      // Otherwise only include explicitly selected columns\r\n      selectedHeaders = [...gqueryTableFactory.selectOption];\r\n    }\r\n\r\n    // Remove duplicates\r\n    selectedHeaders = [...new Set(selectedHeaders)];\r\n\r\n    // Filter rows to only include selected columns\r\n    rows = rows.map((row) => {\r\n      const selectedRow: GQueryRow = {\r\n        __meta: row.__meta,\r\n      };\r\n\r\n      selectedHeaders.forEach((header) => {\r\n        if (row.hasOwnProperty(header)) {\r\n          selectedRow[header] = row[header];\r\n        }\r\n      });\r\n\r\n      return selectedRow;\r\n    });\r\n\r\n    // Update headers to include both selected and joined columns\r\n    return {\r\n      headers: selectedHeaders,\r\n      rows,\r\n    };\r\n  }\r\n\r\n  return {\r\n    headers,\r\n    rows,\r\n  };\r\n}\r\n\r\nexport function queryInternal(\r\n  gqueryTable: GQueryTable,\r\n  query: string\r\n): GQueryResult {\r\n  var sheet = gqueryTable.sheet;\r\n  var range = sheet.getDataRange();\r\n  var replaced = query;\r\n  for (var i = 0; i < range.getLastColumn() - 1; i++) {\r\n    var rng = sheet.getRange(1, i + 1);\r\n\r\n    var name = rng.getValue();\r\n    var letter = rng.getA1Notation().match(/([A-Z]+)/)[0];\r\n    replaced = replaced.replaceAll(name, letter);\r\n  }\r\n\r\n  var response = UrlFetchApp.fetch(\r\n    Utilities.formatString(\r\n      \"https://docs.google.com/spreadsheets/d/%s/gviz/tq?tq=%s%s%s%s\",\r\n      sheet.getParent().getId(),\r\n      encodeURIComponent(replaced),\r\n      \"&sheet=\" + sheet.getName(),\r\n      typeof range === \"string\" ? \"&range=\" + range : \"\",\r\n      \"&headers=1\"\r\n    ),\r\n    {\r\n      headers: {\r\n        Authorization: \"Bearer \" + ScriptApp.getOAuthToken(),\r\n      },\r\n    }\r\n  );\r\n\r\n  var jsonResponse = JSON.parse(\r\n      response\r\n        .getContentText()\r\n        .replace(\"/*O_o*/\\n\", \"\")\r\n        .replace(/(google\\.visualization\\.Query\\.setResponse\\()|(\\);)/gm, \"\")\r\n    ),\r\n    table = jsonResponse.table;\r\n\r\n  // Extract column headers\r\n  const headers = table.cols.map((col: any) => col.label);\r\n\r\n  // Map rows to proper GQueryRow format\r\n  const rows = table.rows.map((row: any, _rowIndex: number) => {\r\n    const rowObj: GQueryRow = {\r\n      __meta: {\r\n        rowNum: -1, // +2 because we're starting from index 0 and row 1 is headers\r\n        colLength: row.c.length,\r\n      },\r\n    };\r\n\r\n    // Initialize all header fields to empty strings\r\n    headers.forEach((header: string) => {\r\n      rowObj[header] = \"\";\r\n    });\r\n\r\n    // Populate row data\r\n    table.cols.forEach((col: any, colIndex: number) => {\r\n      const cellData = row.c[colIndex];\r\n      if (cellData) {\r\n        // Use formatted value if available, otherwise use raw value\r\n        let value =\r\n          cellData.f !== null && cellData.f !== undefined\r\n            ? cellData.f\r\n            : cellData.v;\r\n\r\n        // Convert known data types\r\n        if (value instanceof Date) {\r\n          // Keep as Date object\r\n        } else if (typeof value === \"string\") {\r\n          // Try to auto-detect date strings\r\n          if (\r\n            /^\\d{1,2}\\/\\d{1,2}\\/\\d{4}(\\s\\d{1,2}:\\d{1,2}(:\\d{1,2})?)?$/.test(\r\n              value\r\n            )\r\n          ) {\r\n            try {\r\n              const dateValue = new Date(value);\r\n              if (!isNaN(dateValue.getTime())) {\r\n                value = dateValue;\r\n              }\r\n            } catch (e) {\r\n              // Keep as string if conversion fails\r\n            }\r\n          }\r\n        }\r\n\r\n        rowObj[col.label] = value;\r\n      }\r\n    });\r\n\r\n    return rowObj;\r\n  });\r\n\r\n  // Return in the standard GQueryResult format\r\n  return {\r\n    headers: headers,\r\n    rows: rows,\r\n  };\r\n}\r\n","import { GQueryTableFactory } from \"./index\";\r\nimport { callHandler } from \"./ratelimit\";\r\nimport { GQueryResult, GQueryRow } from \"./types\";\r\n\r\nexport function updateInternal(\r\n  gQueryTableFactory: GQueryTableFactory,\r\n  updateFn: (row: Record<string, any>) => Record<string, any>\r\n): GQueryResult {\r\n  // Get table configuration\r\n  const spreadsheetId = gQueryTableFactory.gQueryTable.spreadsheetId;\r\n  const sheetName = gQueryTableFactory.gQueryTable.sheetName;\r\n  const range = sheetName;\r\n\r\n  // Fetch current data from the sheet\r\n  const response = callHandler(() =>\r\n    Sheets.Spreadsheets.Values.get(spreadsheetId, range)\r\n  );\r\n  const values = response.values || [];\r\n\r\n  if (values.length === 0) {\r\n    return { rows: [], headers: [] };\r\n  }\r\n\r\n  // Extract headers and rows\r\n  const headers = values[0];\r\n  const rows = values.slice(1).map((row) => {\r\n    const obj: Record<string, any> = {};\r\n    headers.forEach((header: string, i: number) => {\r\n      // Ensure all properties are initialized, even if empty\r\n      obj[header] = row[i] !== undefined ? row[i] : \"\";\r\n    });\r\n    return obj;\r\n  });\r\n\r\n  // Filter rows if where function is provided\r\n  let filteredRows = [];\r\n  if (gQueryTableFactory.filterOption) {\r\n    try {\r\n      filteredRows = rows.filter((row) => {\r\n        try {\r\n          return gQueryTableFactory.filterOption(row);\r\n        } catch (error) {\r\n          console.error(\"Error filtering row:\", error);\r\n          return false;\r\n        }\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error in filter function:\", error);\r\n      return { rows: [], headers };\r\n    }\r\n  } else {\r\n    filteredRows = rows;\r\n  }\r\n\r\n  // Update filtered rows\r\n  const updatedRows = filteredRows.map((row) => {\r\n    // Apply the update function to get the updated row values\r\n    const updatedRow = { ...row };\r\n    try {\r\n      const result = updateFn(updatedRow);\r\n      // Handle both return value updates and direct modifications\r\n      Object.assign(updatedRow, result);\r\n    } catch (error) {\r\n      console.error(\"Error updating row:\", error);\r\n    }\r\n\r\n    // Find the index of this row in the original data array\r\n    const rowIndex = rows.findIndex((origRow) =>\r\n      Object.keys(origRow).every((key) => origRow[key] === row[key])\r\n    );\r\n\r\n    // Add __meta to each row with required properties\r\n    if (rowIndex !== -1) {\r\n      updatedRow.__meta = {\r\n        rowNum: rowIndex + 2, // +2 because we have headers at index 0 and row index is 0-based\r\n        colLength: headers.length,\r\n      };\r\n    }\r\n\r\n    return updatedRow;\r\n  });\r\n\r\n  // Track changes to optimize updates\r\n  const changedCells = new Map<string, any[]>();\r\n\r\n  // For each updated row, determine which cells changed\r\n  updatedRows.forEach((updatedRow) => {\r\n    if (!updatedRow.__meta) return;\r\n\r\n    const rowIndex = updatedRow.__meta.rowNum - 2;\r\n    const originalRow = rows[rowIndex];\r\n\r\n    headers.forEach((header, columnIndex) => {\r\n      let updatedValue = updatedRow[header];\r\n\r\n      // Convert Date objects to strings for comparison and storage\r\n      if (updatedValue instanceof Date) {\r\n        updatedValue = updatedValue.toLocaleString();\r\n      }\r\n\r\n      // Skip if values are the same\r\n      if (originalRow[header] === updatedValue) return;\r\n\r\n      // Use A1 notation for the column (A, B, C, etc.)\r\n      const columnLetter = getColumnLetter(columnIndex);\r\n      const cellRange = `${sheetName}!${columnLetter}${updatedRow.__meta.rowNum}`;\r\n\r\n      // Store the change\r\n      changedCells.set(cellRange, [[updatedValue || \"\"]]);\r\n    });\r\n  });\r\n\r\n  // Only update if we have changes\r\n  if (changedCells.size > 0) {\r\n    // Group adjacent cells in the same column for more efficient updates\r\n    const optimizedUpdates = optimizeRanges(changedCells);\r\n\r\n    // Create a batch update request\r\n    const batchUpdateRequest = {\r\n      data: [],\r\n      valueInputOption: \"USER_ENTERED\",\r\n    };\r\n\r\n    // Add each range to the batch request\r\n    for (const [range, values] of Object.entries(optimizedUpdates)) {\r\n      batchUpdateRequest.data.push({\r\n        range: range,\r\n        values: values,\r\n      });\r\n    }\r\n\r\n    // Send a single batch update to Google Sheets\r\n    callHandler(() =>\r\n      Sheets.Spreadsheets.Values.batchUpdate(batchUpdateRequest, spreadsheetId)\r\n    );\r\n  }\r\n\r\n  // If updates were made, properly return the filtered and updated rows\r\n  // Make a fresh copy of the returned rows to ensure they have proper structure\r\n  const resultRows =\r\n    filteredRows.length > 0\r\n      ? updatedRows.map((row) => {\r\n          const resultRow: GQueryRow = { __meta: row.__meta };\r\n          headers.forEach((header) => {\r\n            resultRow[header] = row[header];\r\n          });\r\n          return resultRow;\r\n        })\r\n      : [];\r\n\r\n  // Return the updated rows\r\n  return {\r\n    rows: resultRows as GQueryRow[],\r\n    headers: headers,\r\n  };\r\n}\r\n\r\n/**\r\n * Convert column index to column letter (0 -> A, 1 -> B, etc.)\r\n */\r\nfunction getColumnLetter(columnIndex: number): string {\r\n  let columnLetter = \"\";\r\n  let index = columnIndex;\r\n\r\n  while (index >= 0) {\r\n    columnLetter = String.fromCharCode(65 + (index % 26)) + columnLetter;\r\n    index = Math.floor(index / 26) - 1;\r\n  }\r\n\r\n  return columnLetter;\r\n}\r\n\r\n/**\r\n * Optimize update ranges by combining adjacent cells in the same column\r\n */\r\nfunction optimizeRanges(changedCells: Map<string, any[]>): {\r\n  [range: string]: any[][];\r\n} {\r\n  // Group cells by column\r\n  const columnGroups = new Map<string, Map<number, any>>();\r\n\r\n  for (const [cellRange, value] of changedCells.entries()) {\r\n    // Extract column letter and row number from A1 notation\r\n    const matches = cellRange.match(/([^!]+)!([A-Z]+)(\\d+)$/);\r\n    if (!matches) continue;\r\n\r\n    const sheet = matches[1];\r\n    const columnLetter = matches[2];\r\n    const rowNumber = parseInt(matches[3]);\r\n    const columnKey = `${sheet}!${columnLetter}`;\r\n\r\n    if (!columnGroups.has(columnKey)) {\r\n      columnGroups.set(columnKey, new Map());\r\n    }\r\n\r\n    columnGroups.get(columnKey).set(rowNumber, value[0][0]);\r\n  }\r\n\r\n  // Create optimized ranges\r\n  const optimizedUpdates: { [range: string]: any[][] } = {};\r\n\r\n  for (const [columnKey, rowsMap] of columnGroups.entries()) {\r\n    // Sort row numbers\r\n    const rowNumbers = Array.from(rowsMap.keys()).sort((a, b) => a - b);\r\n\r\n    if (rowNumbers.length === 0) continue;\r\n\r\n    // Find min and max to create one range per column\r\n    const minRow = Math.min(...rowNumbers);\r\n    const maxRow = Math.max(...rowNumbers);\r\n\r\n    // Extract sheet name and column from columnKey\r\n    const sheet = columnKey.split(\"!\")[0];\r\n    const column = columnKey.split(\"!\")[1];\r\n\r\n    // Create a single range from min to max row\r\n    const rangeKey = `${sheet}!${column}${minRow}:${column}${maxRow}`;\r\n\r\n    // Create array of values with proper ordering\r\n    const values = [];\r\n    for (let row = minRow; row <= maxRow; row++) {\r\n      // Use the updated value if it exists, otherwise use empty string to preserve the existing value\r\n      let value = rowsMap.has(row) ? rowsMap.get(row) : \"\";\r\n\r\n      // Convert Date objects to strings\r\n      if (value instanceof Date) {\r\n        value = value.toLocaleString();\r\n      }\r\n\r\n      values.push([value]);\r\n    }\r\n\r\n    optimizedUpdates[rangeKey] = values;\r\n  }\r\n\r\n  return optimizedUpdates;\r\n}\r\n","import { GQueryTable } from \"./index\";\r\nimport { callHandler } from \"./ratelimit\";\r\nimport { GQueryResult, GQueryRow } from \"./types\";\r\n\r\nexport function appendInternal(\r\n  table: GQueryTable,\r\n  data: { [key: string]: any }[]\r\n): GQueryResult {\r\n  // If no data is provided or empty array, return empty result\r\n  if (!data || data.length === 0) {\r\n    return { rows: [], headers: [] };\r\n  }\r\n\r\n  // Extract spreadsheet information\r\n  const spreadsheetId = table.spreadsheetId;\r\n  const sheetName = table.sheetName;\r\n\r\n  // First, get the current headers from the sheet\r\n  const response = callHandler(() =>\r\n    Sheets.Spreadsheets.Values.get(spreadsheetId, `${sheetName}!1:1`)\r\n  );\r\n\r\n  // If sheet is empty or doesn't exist, cannot append\r\n  if (!response || !response.values || response.values.length === 0) {\r\n    throw new Error(`Sheet \"${sheetName}\" not found or has no headers`);\r\n  }\r\n\r\n  const headers = response.values[0].map((header) => String(header));\r\n\r\n  // Format data to be appended according to the sheet's headers\r\n  const rowsToAppend = data.map((item) => {\r\n    // For each header, get corresponding value from item or empty string\r\n    return headers.map((header) => {\r\n      let value = item[header];\r\n\r\n      // Convert Date objects to strings\r\n      if (value instanceof Date) {\r\n        value = value.toLocaleString();\r\n      }\r\n\r\n      return value !== undefined ? value : \"\";\r\n    });\r\n  });\r\n\r\n  // Use Sheets API to append the data\r\n  const appendResponse = callHandler(() =>\r\n    Sheets.Spreadsheets.Values.append(\r\n      { values: rowsToAppend },\r\n      spreadsheetId,\r\n      `${sheetName}`,\r\n      {\r\n        valueInputOption: \"USER_ENTERED\",\r\n        insertDataOption: \"OVERWRITE\",\r\n        responseValueRenderOption: \"FORMATTED_VALUE\",\r\n        responseDateTimeRenderOption: \"FORMATTED_STRING\",\r\n        includeValuesInResponse: true,\r\n      }\r\n    )\r\n  );\r\n\r\n  // Check if append was successful\r\n  if (\r\n    !appendResponse ||\r\n    !appendResponse.updates ||\r\n    !appendResponse.updates.updatedRange\r\n  ) {\r\n    throw new Error(\"Failed to append data to sheet\");\r\n  }\r\n\r\n  // Extract information about the appended rows\r\n  const updatedRange = appendResponse.updates.updatedRange;\r\n  const rangeMatch = updatedRange.match(/([^!]+)!([A-Z]+)(\\d+):([A-Z]+)(\\d+)/);\r\n\r\n  if (!rangeMatch) {\r\n    throw new Error(`Could not parse updated range: ${updatedRange}`);\r\n  }\r\n\r\n  // Get start and end row numbers from the updated range\r\n  const startRow = parseInt(rangeMatch[3]);\r\n  const endRow = parseInt(rangeMatch[5]);\r\n\r\n  // Create result rows with metadata\r\n  const resultRows: GQueryRow[] = rowsToAppend.map((row, index) => {\r\n    const rowObj: GQueryRow = {\r\n      __meta: {\r\n        rowNum: startRow + index,\r\n        colLength: headers.length,\r\n      },\r\n    };\r\n\r\n    // Add data according to headers\r\n    headers.forEach((header, colIndex) => {\r\n      rowObj[header] = row[colIndex];\r\n    });\r\n\r\n    return rowObj;\r\n  });\r\n\r\n  return {\r\n    rows: resultRows,\r\n    headers: headers,\r\n  };\r\n}\r\n","import { GQueryTableFactory } from \"./index\";\r\nimport { callHandler } from \"./ratelimit\";\r\n\r\nexport function deleteInternal(gqueryTableFactory: GQueryTableFactory): {\r\n  deletedRows: number;\r\n} {\r\n  // Get table configuration\r\n  const spreadsheetId = gqueryTableFactory.gQueryTable.spreadsheetId;\r\n  const sheetName = gqueryTableFactory.gQueryTable.sheetName;\r\n  const sheet = gqueryTableFactory.gQueryTable.sheet;\r\n  const sheetId = sheet.getSheetId();\r\n\r\n  // Fetch current data from the sheet\r\n  const response = callHandler(() =>\r\n    Sheets.Spreadsheets.Values.get(spreadsheetId, sheetName)\r\n  );\r\n  const values = response.values || [];\r\n\r\n  if (values.length <= 1) {\r\n    // Only header row or empty sheet\r\n    return { deletedRows: 0 };\r\n  }\r\n\r\n  // Extract headers and rows\r\n  const headers = values[0];\r\n  const rows: Record<string, any>[] = values.slice(1).map((row, rowIndex) => {\r\n    const obj: Record<string, any> = {\r\n      __meta: {\r\n        rowNum: rowIndex + 2, // +2 because we're starting from index 0 and row 1 is headers\r\n        colLength: row.length,\r\n      },\r\n    };\r\n\r\n    headers.forEach((header: string, i: number) => {\r\n      obj[header] = i < row.length ? row[i] : \"\";\r\n    });\r\n\r\n    return obj;\r\n  });\r\n\r\n  // If no filter option, nothing to delete\r\n  if (!gqueryTableFactory.filterOption || rows.length === 0) {\r\n    return { deletedRows: 0 };\r\n  }\r\n\r\n  // Find rows matching the filter condition (these will be deleted)\r\n  const rowsToDelete = rows.filter((row) => {\r\n    try {\r\n      return gqueryTableFactory.filterOption(row);\r\n    } catch (error) {\r\n      console.error(\"Error filtering row:\", error);\r\n      return false;\r\n    }\r\n  });\r\n\r\n  if (rowsToDelete.length === 0) {\r\n    return { deletedRows: 0 };\r\n  }\r\n\r\n  // Sort rowsToDelete by row number in descending order to avoid shifting issues\r\n  rowsToDelete.sort((a, b) => b.__meta.rowNum - a.__meta.rowNum);\r\n\r\n  // Create an array of row indices to delete\r\n  const rowIndicesToDelete = rowsToDelete.map((row) => row.__meta.rowNum);\r\n\r\n  // Create batch update request for deleting the rows\r\n  const batchUpdateRequest = {\r\n    requests: rowIndicesToDelete.map((rowIndex) => ({\r\n      deleteDimension: {\r\n        range: {\r\n          sheetId: sheetId,\r\n          dimension: \"ROWS\",\r\n          startIndex: rowIndex - 1, // Convert to 0-based index\r\n          endIndex: rowIndex, // Range is end-exclusive\r\n        },\r\n      },\r\n    })),\r\n  };\r\n\r\n  // Execute the batch update\r\n  try {\r\n    callHandler(() =>\r\n      Sheets.Spreadsheets.batchUpdate(batchUpdateRequest, spreadsheetId)\r\n    );\r\n  } catch (error) {\r\n    console.error(\"Error deleting rows:\", error);\r\n    return { deletedRows: 0 };\r\n  }\r\n\r\n  return { deletedRows: rowsToDelete.length };\r\n}\r\n","import { getInternal, getManyInternal, queryInternal } from \"./get\";\r\nimport { updateInternal } from \"./update\";\r\nimport { appendInternal } from \"./append\";\r\nimport { deleteInternal } from \"./delete\";\r\nimport { GQueryReadOptions, GQueryResult } from \"./types\";\r\n\r\nexport * from \"./types\";\r\n\r\nexport class GQuery {\r\n  spreadsheetId: string;\r\n\r\n  constructor(spreadsheetId?: string) {\r\n    this.spreadsheetId = spreadsheetId\r\n      ? spreadsheetId\r\n      : SpreadsheetApp.getActiveSpreadsheet().getId();\r\n  }\r\n\r\n  from(sheetName: string): GQueryTable {\r\n    return new GQueryTable(this, this.spreadsheetId, sheetName);\r\n  }\r\n\r\n  getMany(\r\n    sheetNames: string[],\r\n    options?: GQueryReadOptions\r\n  ): {\r\n    [sheetName: string]: GQueryResult;\r\n  } {\r\n    return getManyInternal(this, sheetNames, options);\r\n  }\r\n}\r\n\r\nexport class GQueryTable {\r\n  gquery: GQuery;\r\n  spreadsheetId: string;\r\n  spreadsheet: GoogleAppsScript.Spreadsheet.Spreadsheet;\r\n  sheetName: string;\r\n  sheet: GoogleAppsScript.Spreadsheet.Sheet;\r\n\r\n  constructor(gquery: GQuery, spreadsheetId: string, sheetName: string) {\r\n    this.spreadsheetId = spreadsheetId;\r\n    this.sheetName = sheetName;\r\n    this.spreadsheet = SpreadsheetApp.openById(spreadsheetId);\r\n    this.sheet = this.spreadsheet.getSheetByName(sheetName);\r\n    this.gquery = gquery;\r\n  }\r\n\r\n  select(headers: string[]): GQueryTableFactory {\r\n    return new GQueryTableFactory(this).select(headers);\r\n  }\r\n\r\n  where(filterFn: (row: any) => boolean): GQueryTableFactory {\r\n    return new GQueryTableFactory(this).where(filterFn);\r\n  }\r\n\r\n  join(\r\n    sheetName: string,\r\n    sheetColumn: string,\r\n    joinColumn: string,\r\n    columnsToReturn?: string[]\r\n  ): GQueryTableFactory {\r\n    return new GQueryTableFactory(this).join(\r\n      sheetName,\r\n      sheetColumn,\r\n      joinColumn,\r\n      columnsToReturn\r\n    );\r\n  }\r\n\r\n  update(\r\n    updateFn: (row: Record<string, any>) => Record<string, any>\r\n  ): GQueryResult {\r\n    return new GQueryTableFactory(this).update(updateFn);\r\n  }\r\n\r\n  append(\r\n    data: { [key: string]: any }[] | { [key: string]: any }\r\n  ): GQueryResult {\r\n    // Handle single object by wrapping it in an array\r\n    const dataArray = Array.isArray(data) ? data : [data];\r\n    return appendInternal(this, dataArray);\r\n  }\r\n\r\n  get(options?: GQueryReadOptions): GQueryResult {\r\n    return new GQueryTableFactory(this).get(options);\r\n  }\r\n\r\n  query(query: string): GQueryResult {\r\n    return queryInternal(this, query);\r\n  }\r\n\r\n  delete(): { deletedRows: number } {\r\n    return new GQueryTableFactory(this).delete();\r\n  }\r\n}\r\n\r\nexport class GQueryTableFactory {\r\n  gQueryTable: GQueryTable;\r\n  selectOption?: string[];\r\n  filterOption?: (row: any) => boolean;\r\n  joinOption: {\r\n    sheetName: string;\r\n    sheetColumn: string;\r\n    joinColumn: string;\r\n    columnsToReturn?: string[];\r\n  }[] = [];\r\n\r\n  constructor(GQueryTable: GQueryTable) {\r\n    this.gQueryTable = GQueryTable;\r\n  }\r\n\r\n  select(headers: string[]): GQueryTableFactory {\r\n    this.selectOption = headers;\r\n    return this;\r\n  }\r\n\r\n  where(filterFn: (row: any) => boolean): GQueryTableFactory {\r\n    this.filterOption = filterFn;\r\n    return this;\r\n  }\r\n\r\n  join(\r\n    sheetName: string,\r\n    sheetColumn: string,\r\n    joinColumn: string,\r\n    columnsToReturn?: string[]\r\n  ): GQueryTableFactory {\r\n    this.joinOption.push({\r\n      sheetName,\r\n      sheetColumn,\r\n      joinColumn,\r\n      columnsToReturn,\r\n    });\r\n    return this;\r\n  }\r\n\r\n  get(options?: GQueryReadOptions): GQueryResult {\r\n    return getInternal(this, options);\r\n  }\r\n\r\n  update(\r\n    updateFn: (row: Record<string, any>) => Record<string, any>\r\n  ): GQueryResult {\r\n    return updateInternal(this, updateFn);\r\n  }\r\n\r\n  append(\r\n    data: { [key: string]: any }[] | { [key: string]: any }\r\n  ): GQueryResult {\r\n    // Handle single object by wrapping it in an array\r\n    const dataArray = Array.isArray(data) ? data : [data];\r\n    return appendInternal(this.gQueryTable, dataArray);\r\n  }\r\n\r\n  delete(): { deletedRows: number } {\r\n    return deleteInternal(this);\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}